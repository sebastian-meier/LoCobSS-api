{"openapi":"3.0.0","info":{"title":"LoCobSS API","version":"3.0.0","description":"Hello world api"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"Question":{"properties":{"id":{"type":"integer"},"question_de":{"type":"string"},"description_de":{"type":"string"},"participantSynonym":{"type":"string"},"created":{"type":"string"},"relation":{"type":"string"},"tsne_x":{"type":"number"},"tsne_y":{"type":"number"},"liked":{"type":"boolean"},"state":{"type":"string"},"has_reply":{"type":"boolean"},"sentiment_summary":{"type":"string"},"sonar_all":{"type":"string"},"profanityfilter":{"type":"number"},"taxonomies":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}}},"replies":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}}}}},"Questions":{"type":"array","items":{"$ref":"#/components/schemas/Question"}},"PublicQuestion":{"properties":{"id":{"type":"integer"},"question_de":{"type":"string"},"description_de":{"type":"string"},"participantSynonym":{"type":"string"},"created":{"type":"string"},"relation":{"type":"string"},"liked":{"type":"boolean"},"state":{"type":"string"},"has_reply":{"type":"boolean"},"taxonomies":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}}},"replies":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}}}}},"PublicQuestions":{"type":"array","items":{"$ref":"#/components/schemas/PublicQuestion"}},"PaginatedResult":{"type":"object","properties":{"maxPage":{"type":"integer"},"count":{"type":"integer"},"dateRange":{"type":"array","description":"min and max date","items":{"type":"string","description":"date string"}},"page":{"type":"integer"},"hasSearch":{"type":"boolean"},"hasTaxonomy":{"type":"boolean"},"hasDate":{"type":"boolean"},"hasAnswer":{"type":"boolean"},"results":{"type":"array","items":{"$ref":"#/components/schemas/PublicQuestions"}}}},"SimpleResult":{"type":"object","properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/PublicQuestions"}}}},"ErrorMessage":{"type":"object","properties":{"message":{"type":"string"},"errorCode":{"type":"integer"}}},"Reply":{"type":"object","properties":{"id":{"type":"integer"},"body":{"type":"string"},"name":{"type":"string"},"url":{"type":"string"}}},"Replies":{"type":"array","items":{"$ref":"#/components/schemas/Reply"}},"Taxonomy":{"type":"object","properties":{"id":{"type":"integer"},"parent":{"type":"integer"},"name":{"type":"string"}}},"Taxonomies":{"type":"array","items":{"$ref":"#/components/schemas/Taxonomy"}},"User":{"type":"object","properties":{"displayName":{"type":"string"}}}}},"paths":{"/questions":{"get":{"tags":["questions__auth"],"operationId":"authQuestions","description":"Load all questions","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Array of questions.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Questions"}}}}}}},"/question/like/{id}":{"get":{"tags":["questions__user"],"operationId":"userQuestionsLike","description":"Like a question","security":[{"bearerAuth":[]}],"parameters":[{"name":"id","schema":{"type":"integer"},"in":"path","required":true}],"responses":{"200":{"description":"New state of like for question.","content":{"application/json":{"schema":{"type":"object","properties":{"result":{"type":"boolean"}}}}}},"400":{"description":"ID missing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/question/delete/{id}":{"get":{"tags":["questions__auth"],"operationId":"authQuestionsDelete","description":"Delete a question","security":[{"bearerAuth":[]}],"parameters":[{"name":"id","schema":{"type":"integer"},"in":"path","required":true}],"responses":{"200":{"description":"New state of like for question.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"400":{"description":"ID missing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/question/update/{id}":{"post":{"tags":["questions__auth"],"operationId":"authQuestionsUpdate","description":"Update a question","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true}],"requestBody":{"description":"data for updating the question","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"state":{"type":"string"},"question":{"type":"string"},"description":{"type":"string"}}}}}},"responses":{"200":{"description":"Id of updated question.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"}}}}}},"400":{"description":"ID missing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/question/{id}":{"get":{"tags":["questions__auth"],"operationId":"authQuestion","description":"Load question by id","security":[{"bearerAuth":[]}],"parameters":[{"name":"id","schema":{"type":"integer"},"in":"path","required":true}],"responses":{"200":{"description":"Requested question data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Question"}}}},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}},"404":{"description":"ID not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/related/questions/cluster":{"get":{"tags":["questions__auth"],"operationId":"authQuestionsRelated","description":"Related question for a list of question ids","security":[{"bearerAuth":[]}],"parameters":[{"name":"ids","description":"comma separated id (integer) list","schema":{"type":"string"},"in":"query","required":true}],"responses":{"200":{"description":"List of related ids.","content":{"application/json":{"schema":{"type":"object","properties":{"results":{"type":"array","items":{"type":"integer"}}}}}}},"400":{"description":"IDs missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/system/rebuild":{"get":{"tags":["system"],"operationId":"authQuestionsRebuild","description":"Rebuild embeddings","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Array of questions.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}}}}},"/public/questions/{page}":{"get":{"tags":["questions__public"],"operationId":"publicQuestions","description":"Load all public questions","parameters":[{"in":"path","name":"page","required":true,"schema":{"type":"integer"}},{"in":"query","name":"query","schema":{"type":"string"}},{"in":"query","name":"taxonomies","schema":{"description":"comma-separated list of ids","type":"string"}},{"in":"query","name":"answer","schema":{"type":"boolean"}},{"in":"query","name":"dates","schema":{"description":"comma-separated list of min/max date","type":"string"}}],"responses":{"200":{"description":"Array of questions.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResult"}}}}}}},"/user/questions":{"get":{"tags":["questions__user"],"operationId":"userQuestions","description":"Load questions related to a user (like, ask)","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Array of questions.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimpleResult"}}}}}}},"/question/create":{"post":{"tags":["questions__public"],"operationId":"publicQuestionsCreate","description":"Asking a question","requestBody":{"description":"data for creating a questions","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"grecaptcha":{"description":"security","required":true,"type":"string"},"question":{"required":true,"type":"string"},"description":{"type":"string"},"age":{"type":"string"},"gender":{"type":"string"},"state":{"type":"string"},"regiostar":{"type":"string"},"register":{"type":"boolean"},"password":{"type":"string"},"mail":{"type":"string"},"name":{"type":"string"}}}}}},"responses":{"200":{"description":"Success message.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"question":{"description":"insert id","type":"integer"},"token":{"description":"see question/link","type":"string"},"text":{"description":"question","type":"string"},"results":{"schema":{"$ref":"#/components/schemas/SimpleResult"}}}}}}},"400":{"description":"See error message and code","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/question/link":{"post":{"tags":["questions__public"],"operationId":"publicQuestionsLink","description":"After asking a question the user can link questions","requestBody":{"description":"data for linking two questions","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"description":"security","type":"string"},"source":{"description":"question id","type":"integer"},"target":{"description":"question id","type":"integer"},"strenght":{"type":"string"}}}}}},"responses":{"200":{"description":"Success message.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"400":{"description":"Invalid or not allowed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/public/question/{id}":{"get":{"tags":["questions__public"],"operationId":"publicQuestion","description":"Load public questions by id","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Question.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicQuestion"}}}},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}},"404":{"description":"ID not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/public/related/questions/{id}":{"get":{"tags":["questions__public"],"operationId":"publicQuestionsRelated","description":"Load related public questions by id","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Question.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimpleResult"}}}},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/reply/update":{"post":{"tags":["replies__auth"],"operationId":"authReplyUpdate","description":"Update reply","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"},"body":{"type":"string"},"url":{"type":"string"},"name":{"type":"string"}}}}}},"responses":{"200":{"description":"Reply id."},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/reply/create":{"get":{"tags":["replies__auth"],"operationId":"authReplyCreate","description":"Create reply","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"body","type":"string"},{"name":"url","in":"query","type":"string"},{"name":"name","in":"query","type":"string"}],"responses":{"200":{"description":"New reply id."}}}},"/reply/delete/{id}":{"get":{"tags":["replies__auth"],"operationId":"authReplyDelete","description":"Delete reply","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","type":"integer"}],"responses":{"200":{"description":"Deleted id"}}}},"/reply/assign":{"get":{"tags":["replies__auth"],"operationId":"authReplyAssign","description":"Connect reply and question","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","description":"comma-separated list of question ids","name":"questions","type":"string"},{"name":"replies","description":"comma-separated list of reply ids","in":"query","type":"string"}],"responses":{"200":{"description":"Replies and Questions"}}}},"/reply/revoke":{"get":{"tags":["replies__auth"],"operationId":"authReplyRevoke","description":"Disconnect reply and question","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","description":"comma-separated list of question ids","name":"questions","type":"string"},{"name":"replies","description":"comma-separated list of reply ids","in":"query","type":"string"}],"responses":{"200":{"description":"Replies and Questions"}}}},"/public/replies":{"get":{"tags":["replies__public"],"operationId":"publicReplies","description":"Load all replies","responses":{"200":{"description":"Reply.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Replies"}}}}}}},"/reply/{id}":{"get":{"tags":["replies__auth"],"operationId":"authReply","description":"Load reply by id","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Reply.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Reply"}}}},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}},"404":{"description":"ID not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/taxonomy/update":{"post":{"tags":["taxonomies__auth"],"operationId":"authTaxonomyUpdate","description":"Update taxonomy","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"parent":{"type":"integer"}}}}}},"responses":{"200":{"description":"Taxonomy id."},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/taxonomy/create":{"get":{"tags":["taxonomies__auth"],"operationId":"authTaxonomyCreate","description":"Create taxonomy","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"name","type":"string"},{"name":"parent","in":"query","type":"integer"}],"responses":{"200":{"description":"New taxonomy id."}}}},"/taxonomy/delete/{id}":{"get":{"tags":["taxonomies__auth"],"operationId":"authTaxonomyDelete","description":"Delete taxonomy","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","type":"integer"}],"responses":{"200":{"description":"Deleted id"}}}},"/taxonomy/assign":{"get":{"tags":["replies__auth"],"operationId":"authTaxonomyAssign","description":"Connect taxonomies and question","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","description":"comma-separated list of question ids","name":"questions","type":"string"},{"name":"taxonomies","description":"comma-separated list of taxonomy ids","in":"query","type":"string"}],"responses":{"200":{"description":"Taxonomies and Questions"}}}},"/taxonomy/revoke":{"get":{"tags":["taxonomies__auth"],"operationId":"authTaxonomyRevoke","description":"Disconnect taxonomies and questions","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","description":"comma-separated list of question ids","name":"questions","type":"string"},{"name":"taxonomies","description":"comma-separated list of taxonomy ids","in":"query","type":"string"}],"responses":{"200":{"description":"Taxonomies and Questions"}}}},"/public/taxonomies":{"get":{"tags":["taxonomies__public"],"operationId":"publicTaxonomies","description":"Load all taxonomies","responses":{"200":{"description":"Taxonomies.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Taxonomies"}}}}}}},"/taxonomy/{id}":{"get":{"tags":["taxonomies__auth"],"operationId":"authTaxonomy","description":"Load taxonomy by id","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Taxonomy.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Taxonomy"}}}},"400":{"description":"ID missing or not valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}},"404":{"description":"ID not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}}},"/users":{"post":{"tags":["users__auth"],"operationId":"authUsersCreate","description":"Create User","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"displayName":{"type":"string"},"password":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}}}},"responses":{"201":{"description":"New user id"},"400":{"description":"Missing data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"}}}}}},"get":{"tags":["users__auth"],"operationId":"authUsersList","description":"List users","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Array of users"}}}},"/users/{id}":{"get":{"tags":["users__auth"],"operationId":"authUsersDetail","description":"Get user by id","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","type":"integer","required":true}],"responses":{"200":{"description":"User object"}}},"patch":{"tags":["users__auth"],"operationId":"authUsersUpdate","description":"Update user by id","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"displayName":{"type":"string"},"password":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}}}},"responses":{"200":{"description":"User object"}}},"delete":{"tags":["users__auth"],"operationId":"authUsersDelete","description":"Delete user by id","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","type":"integer","required":true}],"responses":{"200":{"description":"User id"}}}}},"tags":[]}